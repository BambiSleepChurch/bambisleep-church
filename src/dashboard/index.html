<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸŒ¸ BambiSleepâ„¢ MCP Control Tower</title>
  <link rel="stylesheet" href="css/main.css">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="manifest" href="site.webmanifest">
  <script type="text/javascript">
    (function (c, l, a, r, i, t, y) {
      c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
      t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
      y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
    })(window, document, "clarity", "script", "utux7nv0pm");
  </script>
</head>
<body class="dashboard-layout">
  <!-- Sidebar Overlay (Mobile) -->
  <div id="sidebar-overlay" class="sidebar-overlay" onclick="window.Dashboard.toggleSidebar()"></div>

  <!-- Sidebar Navigation -->
  <aside id="sidebar" class="sidebar">
    <div class="sidebar-header">
      <span class="sidebar-logo">ğŸŒ¸</span>
      <button class="sidebar-toggle" onclick="window.Dashboard.toggleSidebar()" title="Toggle sidebar">
        â˜°
      </button>
    </div>
    
    <nav class="sidebar-nav">
      <div class="nav-section">
        <div class="nav-section-title">Dashboard</div>
        <a class="nav-item active" data-section="overview" onclick="window.Dashboard.showSection('overview')">
          <span class="nav-item-icon">ğŸ“Š</span>
          <span class="nav-item-text">Overview</span>
        </a>
        <a class="nav-item" data-section="servers" onclick="window.Dashboard.showSection('servers')">
          <span class="nav-item-icon">âš¡</span>
          <span class="nav-item-text">MCP Servers</span>
          <span class="nav-badge" id="server-count">0</span>
        </a>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Integrations</div>
        <a class="nav-item" data-section="memory" onclick="window.Dashboard.showSection('memory')">
          <span class="nav-item-icon">ğŸ§ </span>
          <span class="nav-item-text">Memory Graph</span>
        </a>
        <a class="nav-item" data-section="github" onclick="window.Dashboard.showSection('github')">
          <span class="nav-item-icon">ğŸ™</span>
          <span class="nav-item-text">GitHub</span>
        </a>
        <a class="nav-item" data-section="huggingface" onclick="window.Dashboard.showSection('huggingface')">
          <span class="nav-item-icon">ğŸ¤—</span>
          <span class="nav-item-text">HuggingFace</span>
        </a>
        <a class="nav-item" data-section="stripe" onclick="window.Dashboard.showSection('stripe')">
          <span class="nav-item-icon">ğŸ’³</span>
          <span class="nav-item-text">Stripe</span>
        </a>
        <a class="nav-item" data-section="mongodb" onclick="window.Dashboard.showSection('mongodb')">
          <span class="nav-item-icon">ğŸƒ</span>
          <span class="nav-item-text">MongoDB</span>
        </a>
        <a class="nav-item" data-section="sqlite" onclick="window.Dashboard.showSection('sqlite')">
          <span class="nav-item-icon">ğŸ’¾</span>
          <span class="nav-item-text">SQLite</span>
        </a>
        <a class="nav-item" data-section="patreon" onclick="window.Dashboard.showSection('patreon')">
          <span class="nav-item-icon">ğŸ¨</span>
          <span class="nav-item-text">Patreon</span>
        </a>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Tools</div>
        <a class="nav-item" data-section="lmstudio" onclick="window.Dashboard.showSection('lmstudio')">
          <span class="nav-item-icon">ğŸ¤–</span>
          <span class="nav-item-text">LM Studio</span>
        </a>
        <a class="nav-item" data-section="bambisleep" onclick="window.Dashboard.showSection('bambisleep')">
          <span class="nav-item-icon">ğŸŒ€</span>
          <span class="nav-item-text">BambiSleep</span>
        </a>
        <a class="nav-item" data-section="agent" onclick="window.Dashboard.showSection('agent')">
          <span class="nav-item-icon">ğŸ¤–</span>
          <span class="nav-item-text">Agent Chat</span>
        </a>
        <a class="nav-item" data-section="agent-tools" onclick="window.Dashboard.showSection('agent-tools')">
          <span class="nav-item-icon">ğŸ”§</span>
          <span class="nav-item-text">Agent Tools</span>
          <span class="nav-badge" id="tools-count">154</span>
        </a>
        <a class="nav-item" data-section="avatar" onclick="window.Dashboard.showSection('avatar')">
          <span class="nav-item-icon">ğŸŒ¸</span>
          <span class="nav-item-text">Avatar</span>
        </a>
        <a class="nav-item" data-section="api-builder" onclick="window.Dashboard.showSection('api-builder')">
          <span class="nav-item-icon">ğŸ”§</span>
          <span class="nav-item-text">API Builder</span>
        </a>
        <a class="nav-item" data-section="puppeteer" onclick="window.Dashboard.showSection('puppeteer')">
          <span class="nav-item-icon">ğŸ­</span>
          <span class="nav-item-text">Puppeteer</span>
        </a>
        <a class="nav-item" data-section="thinking" onclick="window.Dashboard.showSection('thinking')">
          <span class="nav-item-icon">ğŸ’­</span>
          <span class="nav-item-text">Thinking</span>
        </a>
        <a class="nav-item" data-section="storage" onclick="window.Dashboard.showSection('storage')">
          <span class="nav-item-icon">ğŸ“</span>
          <span class="nav-item-text">Storage</span>
        </a>
        <a class="nav-item" data-section="fetch" onclick="window.Dashboard.showSection('fetch')">
          <span class="nav-item-icon">ğŸŒ</span>
          <span class="nav-item-text">Fetch</span>
        </a>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Analytics</div>
        <a class="nav-item" data-section="clarity" onclick="window.Dashboard.showSection('clarity')">
          <span class="nav-item-icon">ğŸ“ˆ</span>
          <span class="nav-item-text">Clarity</span>
        </a>
        <a class="nav-item" data-section="activity" onclick="window.Dashboard.showSection('activity')">
          <span class="nav-item-icon">ğŸ“‹</span>
          <span class="nav-item-text">Activity</span>
        </a>
      </div>
    </nav>

    <div class="sidebar-footer">
      <div id="ws-indicator" class="ws-indicator ws-disconnected" title="WebSocket Status">
        <span class="ws-dot"></span>
        <span class="ws-label">Offline</span>
      </div>
    </div>
  </aside>

  <!-- Header -->
  <header class="header">
    <div class="header-inner header-inner-full">
      <div class="header-left">
        <button class="mobile-menu-btn btn btn-secondary" onclick="window.Dashboard.toggleSidebar()" title="Menu">
          â˜°
        </button>
        <h1 class="header-title">ğŸŒ¸ BambiSleepâ„¢ MCP Control Tower</h1>
      </div>
      <div class="header-actions">
        <div class="search-bar-compact">
          <input type="text" id="global-search" class="search-input" placeholder="ğŸ” Search... (Ctrl+K)" />
        </div>
        <button class="theme-toggle btn btn-secondary" onclick="window.Dashboard.toggleTheme()" title="Toggle theme">
          ğŸŒ™
        </button>
        <button class="btn btn-secondary" onclick="window.Dashboard.showShortcuts()" title="Keyboard shortcuts">
          âŒ¨ï¸
        </button>
        <div id="stats" class="stats-bar"></div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Overview Section (Default) -->
    <section id="section-overview" class="dashboard-section active">
      <!-- Quick Actions -->
      <div class="quick-actions">
        <button class="quick-action-btn primary" onclick="window.Dashboard.refresh()">
          ğŸ”„ Refresh All
        </button>
        <button class="quick-action-btn" onclick="window.Dashboard.exportConfigs()">
          ğŸ“¤ Export Configs
        </button>
        <button class="quick-action-btn" onclick="window.Dashboard.importConfigs()">
          ğŸ“¥ Import Configs
        </button>
        <button class="quick-action-btn" onclick="window.AgentChat?.newConversation()">
          ğŸ’¬ New Chat
        </button>
        <button class="quick-action-btn" onclick="window.Dashboard.showSection('agent-tools')">
          ğŸ”§ Test Tools (154)
        </button>
        <button class="quick-action-btn" onclick="window.AgentChat?.showTools()">
          ğŸ› ï¸ Tools Reference
        </button>
      </div>

      <!-- Metrics Grid -->
      <div class="metrics-grid">
        <div class="metric-card glass-card">
          <div class="metric-header">
            <span class="metric-icon">âš¡</span>
            <span class="metric-trend up" id="metric-servers-trend">â†‘ Active</span>
          </div>
          <div class="metric-value" id="metric-servers">0</div>
          <div class="metric-label">MCP Servers</div>
        </div>
        <div class="metric-card glass-card">
          <div class="metric-header">
            <span class="metric-icon">ï¿½</span>
            <span class="metric-trend" id="metric-tools-trend">Ready</span>
          </div>
          <div class="metric-value" id="metric-tools">154</div>
          <div class="metric-label">Agent Tools</div>
        </div>
        <div class="metric-card glass-card">
          <div class="metric-header">
            <span class="metric-icon">ï¿½ğŸ”Œ</span>
          </div>
          <div class="metric-value" id="metric-connections">0</div>
          <div class="metric-label">Active Connections</div>
        </div>
        <div class="metric-card glass-card">
          <div class="metric-header">
            <span class="metric-icon">ğŸ“Š</span>
          </div>
          <div class="metric-value" id="metric-requests">0</div>
          <div class="metric-label">API Requests</div>
        </div>
        <div class="metric-card glass-card">
          <div class="metric-header">
            <span class="metric-icon">â±ï¸</span>
          </div>
          <div class="metric-value" id="metric-uptime">0s</div>
          <div class="metric-label">Uptime</div>
        </div>
      </div>

      <!-- Dashboard Grid -->
      <div class="dashboard-grid">
        <!-- Server Status Panel -->
        <div class="panel panel-md">
          <div class="panel-header">
            <h3 class="panel-title">âš¡ Server Status</h3>
            <div class="panel-actions">
              <button class="btn btn-small btn-outline" onclick="window.Dashboard.refresh()">Refresh</button>
            </div>
          </div>
          <div class="panel-body" id="overview-servers">
            <div class="integrations-grid">
              <div class="integration-item" onclick="window.Dashboard.showSection('memory')">
                <span class="integration-icon">ğŸ§ </span>
                <span class="integration-name">Memory</span>
                <span class="integration-desc">Knowledge Graph</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('github')">
                <span class="integration-icon">ğŸ™</span>
                <span class="integration-name">GitHub</span>
                <span class="integration-desc">Repository Ops</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('huggingface')">
                <span class="integration-icon">ğŸ¤—</span>
                <span class="integration-name">HuggingFace</span>
                <span class="integration-desc">ML Models</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('stripe')">
                <span class="integration-icon">ğŸ’³</span>
                <span class="integration-name">Stripe</span>
                <span class="integration-desc">Payments</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('mongodb')">
                <span class="integration-icon">ğŸƒ</span>
                <span class="integration-name">MongoDB</span>
                <span class="integration-desc">Document DB</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('sqlite')">
                <span class="integration-icon">ğŸ’¾</span>
                <span class="integration-name">SQLite</span>
                <span class="integration-desc">Local DB</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('puppeteer')">
                <span class="integration-icon">ğŸ­</span>
                <span class="integration-name">Puppeteer</span>
                <span class="integration-desc">Browser Auto</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('fetch')">
                <span class="integration-icon">ğŸŒ</span>
                <span class="integration-name">Fetch</span>
                <span class="integration-desc">HTTP Requests</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('thinking')">
                <span class="integration-icon">ğŸ’­</span>
                <span class="integration-name">Thinking</span>
                <span class="integration-desc">Reasoning</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('storage')">
                <span class="integration-icon">ğŸ“</span>
                <span class="integration-name">Storage</span>
                <span class="integration-desc">File Hosting</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('patreon')">
                <span class="integration-icon">ğŸ¨</span>
                <span class="integration-name">Patreon</span>
                <span class="integration-desc">Creator Platform</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('lmstudio')">
                <span class="integration-icon">ğŸ¤–</span>
                <span class="integration-name">LM Studio</span>
                <span class="integration-desc">Local LLM</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('bambisleep')">
                <span class="integration-icon">ğŸŒ€</span>
                <span class="integration-name">BambiSleep</span>
                <span class="integration-desc">Chat & TTS</span>
              </div>
              <div class="integration-item" onclick="window.Dashboard.showSection('clarity')">
                <span class="integration-icon">ğŸ“ˆ</span>
                <span class="integration-name">Clarity</span>
                <span class="integration-desc">Analytics</span>
              </div>
            </div>
          </div>
        </div>

        <!-- System Info Panel -->
        <div class="panel panel-md">
          <div class="panel-header">
            <h3 class="panel-title">ğŸ“Š System Info</h3>
          </div>
          <div class="panel-body" id="system-info">
            <div class="info-grid">
              <div class="info-item">
                <span class="info-label">Status</span>
                <span class="info-value">Loading...</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Activity Feed Panel -->
        <div class="panel panel-full">
          <div class="panel-header">
            <h3 class="panel-title">ğŸ“‹ Recent Activity</h3>
            <div class="panel-actions">
              <button class="btn btn-small btn-outline" onclick="window.Dashboard.clearActivity()">Clear</button>
            </div>
          </div>
          <div class="panel-body no-padding" id="activity-feed">
            <!-- Activity feed renders here -->
          </div>
        </div>
      </div>
    </section>

    <!-- Servers Section -->
    <section id="section-servers" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">âš¡ MCP Servers</h2>
        <div class="section-actions">
          <div class="search-filters">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="running">Running</button>
            <button class="filter-btn" data-filter="stopped">Stopped</button>
            <button class="filter-btn" data-filter="error">Errors</button>
          </div>
          <button onclick="window.Dashboard.resetServerOrder()" class="reset-order-btn" title="Reset to default order">â†© Reset Order</button>
          <button onclick="window.Dashboard.refresh()" class="btn btn-primary">ğŸ”„ Refresh</button>
        </div>
      </div>
      
      <div id="servers" class="server-grid">
        <!-- Server cards render here via JavaScript -->
        <div class="glass-card server-card">
          <div class="skeleton skeleton-title"></div>
          <div class="skeleton skeleton-text"></div>
        </div>
      </div>
    </section>

    <!-- Avatar Section -->
    <section id="section-avatar" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸŒ¸ Bambi Avatar</h2>
        <div class="section-actions">
          <button onclick="window.AvatarController?.toggle()" class="btn btn-primary" id="avatar-main-toggle">â–¶ï¸ Start</button>
        </div>
      </div>
      <div id="avatar-container-main">
        <div class="glass-card skeleton-card">
          <div class="skeleton skeleton-title skeleton-centered"></div>
          <div class="skeleton skeleton-text skeleton-narrow skeleton-centered"></div>
        </div>
      </div>
    </section>

    <!-- Agent Section -->
    <section id="section-agent" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ¤– Agent Orchestrator</h2>
        <div class="section-actions">
          <button onclick="window.AgentChat?.newConversation()" class="btn btn-outline">â• New Chat</button>
          <button onclick="window.AgentChat?.showTools()" class="btn btn-outline">ğŸ”§ Tools</button>
          <button onclick="window.Dashboard.toggleWorkspace()" class="btn btn-outline" id="workspace-toggle">ğŸ“ Workspace</button>
        </div>
      </div>
      <div class="agent-layout">
        <div id="agent-container" class="agent-chat-panel">
          <div class="glass-card skeleton-card">
            <div class="skeleton skeleton-title skeleton-centered"></div>
            <div class="skeleton skeleton-text skeleton-narrow skeleton-centered"></div>
          </div>
        </div>
        <div id="agent-workspace-panel" class="agent-workspace-panel hidden">
          <div class="glass-card workspace-wrapper">
            <div class="workspace-header">
              <h2 class="workspace-title">
                <span class="workspace-icon">ğŸ“</span>
                Agent Workspace
              </h2>
              <div class="workspace-controls">
                <select class="layout-select" id="workspace-layout" title="Workspace layout" onchange="window.AgentWorkspace?.setLayout(this.value)">
                  <option value="stack">Stack</option>
                  <option value="grid">Grid</option>
                  <option value="columns">Columns</option>
                </select>
                <button class="btn btn-sm" onclick="window.AgentWorkspace?.clear()" title="Clear workspace">
                  ğŸ—‘ï¸
                </button>
                <button class="btn btn-sm" onclick="window.Dashboard.toggleWorkspaceHistory()" title="Show history">
                  ğŸ“œ
                </button>
              </div>
            </div>
            <div id="agent-workspace" class="workspace-content agent-workspace layout-stack">
              <div class="workspace-empty">
                <div class="empty-icon">ğŸ“</div>
                <h3>Agent Workspace</h3>
                <p>Dynamic components rendered by the agent will appear here.</p>
                <p class="hint">Try asking: "Show me a table of GitHub repos" or "Create a form to collect user data"</p>
              </div>
            </div>
            <div class="workspace-history collapsed" id="workspace-history">
              <h4>Render History</h4>
              <div class="history-list"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Agent Tools Testing Section -->
    <section id="section-agent-tools" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ”§ Agent Tools Testing</h2>
        <div class="section-actions">
          <button onclick="window.AgentTools?.runTests()" class="btn btn-primary">â–¶ï¸ Run Tests</button>
          <button onclick="window.AgentTools?.loadResults()" class="btn btn-outline">ğŸ“Š Load Results</button>
          <button onclick="window.AgentTools?.exportResults()" class="btn btn-outline">ğŸ“¤ Export</button>
        </div>
      </div>

      <!-- Test Summary -->
      <div class="tools-summary glass-card">
        <div class="summary-stats">
          <div class="stat-item">
            <div class="stat-value" id="total-tools">154</div>
            <div class="stat-label">Total Tools</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="tested-tools">0</div>
            <div class="stat-label">Tested</div>
          </div>
          <div class="stat-item">
            <div class="stat-value success" id="passed-tools">0</div>
            <div class="stat-label">Passed</div>
          </div>
          <div class="stat-item">
            <div class="stat-value warning" id="failed-tools">0</div>
            <div class="stat-label">Failed</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="success-rate">0%</div>
            <div class="stat-label">Success Rate</div>
          </div>
        </div>
        <div class="summary-chart">
          <div class="progress-ring">
            <svg width="120" height="120">
              <circle cx="60" cy="60" r="54" fill="none" stroke="var(--glass-border)" stroke-width="8"/>
              <circle id="progress-circle" cx="60" cy="60" r="54" fill="none" stroke="var(--accent-primary)" 
                      stroke-width="8" stroke-dasharray="339.292" stroke-dashoffset="339.292" 
                      transform="rotate(-90 60 60)"/>
              <text x="60" y="60" text-anchor="middle" dy=".3em" font-size="24" fill="var(--text-primary)" id="progress-text">0%</text>
            </svg>
          </div>
        </div>
      </div>

      <!-- Category Breakdown -->
      <div class="tools-categories glass-card">
        <h3>ğŸ“‹ Categories (18)</h3>
        <div id="category-list" class="category-grid">
          <!-- Dynamically populated -->
          <div class="category-item skeleton">
            <div class="category-header">
              <span class="category-name skeleton-text"></span>
              <span class="category-count skeleton-text skeleton-narrow"></span>
            </div>
            <div class="category-progress">
              <div class="progress-bar skeleton"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Test Results Table -->
      <div class="tools-results glass-card">
        <h3>ğŸ§ª Test Results</h3>
        <div class="results-controls">
          <input type="text" id="results-filter" class="search-input" placeholder="ğŸ” Filter tools..." />
          <select id="category-filter" class="filter-select" title="Filter by category">
            <option value="all">All Categories</option>
            <option value="memory">Memory (9)</option>
            <option value="user-model">User Model (9)</option>
            <option value="conversation">Conversation (10)</option>
            <option value="workspace">Workspace (8)</option>
            <option value="memory-manager">Memory Manager (10)</option>
            <option value="storage">Storage (7)</option>
            <option value="fetch">Fetch (4)</option>
            <option value="github">GitHub (3)</option>
            <option value="lmstudio">LM Studio (4)</option>
            <option value="mongodb">MongoDB (9)</option>
            <option value="sqlite">SQLite (6)</option>
            <option value="thinking">Thinking (4)</option>
            <option value="stripe">Stripe (12)</option>
            <option value="patreon">Patreon (15)</option>
            <option value="clarity">Clarity (7)</option>
            <option value="puppeteer">Puppeteer (12)</option>
            <option value="huggingface">HuggingFace (3)</option>
            <option value="render">Render (22)</option>
          </select>
          <select id="status-filter" class="filter-select" title="Filter by status">
            <option value="all">All Statuses</option>
            <option value="pass">âœ… Passed</option>
            <option value="fail">âš ï¸ Failed</option>
            <option value="error">âŒ Error</option>
            <option value="not-tested">âšª Not Tested</option>
          </select>
        </div>
        <div id="results-table" class="results-table-container">
          <!-- Dynamically populated -->
          <table class="results-table">
            <thead>
              <tr>
                <th>Status</th>
                <th>Tool Name</th>
                <th>Category</th>
                <th>Description</th>
                <th>Result</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="results-tbody">
              <tr class="skeleton-row">
                <td><span class="skeleton skeleton-badge"></span></td>
                <td><span class="skeleton skeleton-text"></span></td>
                <td><span class="skeleton skeleton-text skeleton-narrow"></span></td>
                <td><span class="skeleton skeleton-text"></span></td>
                <td><span class="skeleton skeleton-text skeleton-narrow"></span></td>
                <td><span class="skeleton skeleton-text skeleton-narrow"></span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Clarity Section -->
    <section id="section-clarity" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ“ˆ Analytics Dashboard</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('clarity', 'init')" class="btn btn-outline">ğŸš€ Init</button>
          <button onclick="window.Dashboard.serverAction('clarity', 'dashboard')" class="btn btn-outline">ğŸ“Š Dashboard</button>
          <button onclick="window.Dashboard.refreshClarity()" class="btn btn-primary">ğŸ”„ Refresh</button>
        </div>
      </div>
      <div id="clarity-container">
        <div class="glass-card skeleton-card">
          <div class="skeleton skeleton-title skeleton-centered"></div>
          <div class="skeleton skeleton-text skeleton-narrow skeleton-centered"></div>
        </div>
      </div>
      <div id="clarity-action-result" class="glass-card result-container hidden"></div>
    </section>

    <!-- Activity Section -->
    <section id="section-activity" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ“‹ Activity Feed</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.clearActivity()" class="btn btn-outline">Clear All</button>
        </div>
      </div>
      <div id="activity-feed-full" class="glass-card">
        <!-- Full activity feed renders here -->
      </div>
    </section>

    <!-- Memory Section -->
    <section id="section-memory" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ§  Memory Knowledge Graph</h2>
        <div class="section-actions">
          <button onclick="window.MemoryGraph.loadGraph()" class="btn btn-outline">ğŸ“– Load Graph</button>
          <button onclick="window.Dashboard.serverAction('memory', 'search')" class="btn btn-primary">ğŸ” Search</button>
        </div>
      </div>
      <div id="memory-container" class="glass-card">
        <div class="memory-graph-container">
          <div class="graph-toolbar">
            <button class="btn btn-small btn-primary" onclick="window.MemoryGraph.loadGraph()">
              ğŸ”„ Load Graph
            </button>
            <button class="btn btn-small btn-outline" onclick="window.MemoryGraph.zoomIn()">
              â• Zoom In
            </button>
            <button class="btn btn-small btn-outline" onclick="window.MemoryGraph.zoomOut()">
              â– Zoom Out
            </button>
            <button class="btn btn-small btn-outline" onclick="window.MemoryGraph.resetZoom()">
              ğŸ¯ Reset
            </button>
            <button class="btn btn-small btn-outline" onclick="window.MemoryGraph.togglePhysics()">
              âš¡ Physics
            </button>
            <span class="graph-stats" id="graph-stats">Nodes: 0 | Relations: 0</span>
          </div>
          <div class="graph-canvas-wrapper">
            <svg id="memory-graph-svg" class="graph-svg"></svg>
          </div>
          <div class="graph-legend">
            <div class="legend-item"><span class="legend-dot entity-person"></span> Person</div>
            <div class="legend-item"><span class="legend-dot entity-concept"></span> Concept</div>
            <div class="legend-item"><span class="legend-dot entity-event"></span> Event</div>
            <div class="legend-item"><span class="legend-dot entity-default"></span> Other</div>
          </div>
          <div id="node-tooltip" class="node-tooltip hidden"></div>
        </div>
      </div>
    </section>

    <!-- API Builder Section -->
    <section id="section-api-builder" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ”§ API Request Builder</h2>
        <div class="section-actions">
          <button onclick="window.ApiBuilder.loadEndpoints()" class="btn btn-outline">ğŸ“‹ Endpoints</button>
          <a href="/docs" target="_blank" class="btn btn-primary">ğŸ“š API Docs</a>
        </div>
      </div>
      <div id="api-builder-container" class="glass-card api-builder-container">
        <div class="api-builder-content">
          <!-- Endpoint Selection -->
          <div class="api-builder-section">
            <label class="api-label" id="endpoint-label">Endpoint</label>
            <div class="api-endpoint-row">
              <select id="api-method" class="api-select method-select" aria-label="HTTP Method" title="HTTP Method">
                <option value="GET">GET</option>
                <option value="POST">POST</option>
                <option value="PUT">PUT</option>
                <option value="DELETE">DELETE</option>
              </select>
              <input type="text" id="api-url" class="api-input url-input" 
                     placeholder="/api/health" value="/api/health">
            </div>
          </div>

          <!-- Quick Endpoints -->
          <div class="api-builder-section">
            <label class="api-label">Quick Endpoints</label>
            <div class="quick-endpoints">
              <button class="quick-endpoint-btn" onclick="window.ApiBuilder.setEndpoint('GET', '/api/health')">Health</button>
              <button class="quick-endpoint-btn" onclick="window.ApiBuilder.setEndpoint('GET', '/api/servers')">Servers</button>
              <button class="quick-endpoint-btn" onclick="window.ApiBuilder.setEndpoint('GET', '/api/memory')">Memory</button>
              <button class="quick-endpoint-btn" onclick="window.ApiBuilder.setEndpoint('GET', '/api/agent/tools')">Tools</button>
              <button class="quick-endpoint-btn" onclick="window.ApiBuilder.setEndpoint('GET', '/api/metrics')">Metrics</button>
              <button class="quick-endpoint-btn" onclick="window.ApiBuilder.setEndpoint('GET', '/api/openapi')">OpenAPI</button>
            </div>
          </div>

          <!-- Headers -->
          <div class="api-builder-section">
            <label class="api-label">
              Headers
              <button class="btn btn-tiny btn-outline" onclick="window.ApiBuilder.addHeader()">+ Add</button>
            </label>
            <div id="api-headers" class="api-headers-list">
              <div class="api-header-row">
                <input type="text" class="api-input header-key" placeholder="Key" value="Content-Type">
                <input type="text" class="api-input header-value" placeholder="Value" value="application/json">
                <button class="btn btn-tiny btn-danger" onclick="this.parentElement.remove()">Ã—</button>
              </div>
            </div>
          </div>

          <!-- Request Body -->
          <div class="api-builder-section">
            <label class="api-label">Request Body (JSON)</label>
            <textarea id="api-body" class="api-textarea" placeholder='{ "key": "value" }'></textarea>
            <div class="body-actions">
              <button class="btn btn-tiny btn-outline" onclick="window.ApiBuilder.formatJson()">Format</button>
              <button class="btn btn-tiny btn-outline" onclick="window.ApiBuilder.clearBody()">Clear</button>
            </div>
          </div>

          <!-- Send Button -->
          <div class="api-builder-actions">
            <button id="api-send-btn" class="btn btn-primary btn-large" onclick="window.ApiBuilder.sendRequest()">
              ğŸš€ Send Request
            </button>
            <button class="btn btn-outline" onclick="window.ApiBuilder.generateCurl()">
              ğŸ“‹ Copy cURL
            </button>
          </div>

          <!-- Response -->
          <div class="api-builder-section">
            <label class="api-label">
              Response
              <span id="api-status" class="api-status"></span>
              <span id="api-time" class="api-time"></span>
            </label>
            <div class="response-tabs">
              <button class="tab-btn active" data-tab="body" onclick="window.ApiBuilder.showTab('body')">Body</button>
              <button class="tab-btn" data-tab="headers" onclick="window.ApiBuilder.showTab('headers')">Headers</button>
            </div>
            <div id="api-response-body" class="api-response active">
              <pre id="api-response-text">// Response will appear here</pre>
            </div>
            <div id="api-response-headers" class="api-response">
              <pre id="api-response-headers-text">// Headers will appear here</pre>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- GitHub Section -->
    <section id="section-github" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ™ GitHub Integration</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('github', 'user')" class="btn btn-outline">ğŸ‘¤ My Profile</button>
          <button onclick="window.Dashboard.serverAction('github', 'repos')" class="btn btn-primary">ğŸ“‚ My Repos</button>
        </div>
      </div>
      <div id="github-container" class="glass-card">
        <div class="empty-state">
          <span class="empty-icon">ğŸ™</span>
          <h3>GitHub Integration</h3>
          <p>View your profile or browse your repositories.</p>
        </div>
      </div>
      <div id="github-action-result" class="glass-card result-container hidden"></div>
    </section>

    <!-- HuggingFace Section -->
    <section id="section-huggingface" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ¤— HuggingFace ML</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('huggingface', 'models')" class="btn btn-outline">ğŸ¤– Search Models</button>
          <button onclick="window.Dashboard.serverAction('huggingface', 'datasets')" class="btn btn-primary">ğŸ“Š Search Datasets</button>
        </div>
      </div>
      <div id="huggingface-container" class="glass-card">
        <div class="empty-state">
          <span class="empty-icon">ğŸ¤—</span>
          <h3>HuggingFace ML Hub</h3>
          <p>Search for ML models and datasets from the HuggingFace Hub.</p>
        </div>
      </div>
      <div id="huggingface-action-result" class="glass-card result-container hidden"></div>
    </section>

    <!-- Stripe Section -->
    <section id="section-stripe" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ’³ Stripe Payments</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('stripe', 'customers')" class="btn btn-outline">ğŸ‘¥ Customers</button>
          <button onclick="window.Dashboard.serverAction('stripe', 'balance')" class="btn btn-primary">ğŸ’° Balance</button>
        </div>
      </div>
      <div id="stripe-container" class="glass-card">
        <div class="empty-state">
          <span class="empty-icon">ğŸ’³</span>
          <h3>Stripe Payments</h3>
          <p>View customers and check your account balance.</p>
        </div>
      </div>
      <div id="clarity-action-result" class="glass-card result-container hidden"></div>
    </section>

    <!-- MongoDB Section -->
    <section id="section-mongodb" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸƒ MongoDB Database</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('mongodb', 'connect')" class="btn btn-outline">ğŸ”Œ Connect</button>
          <button onclick="window.Dashboard.serverAction('mongodb', 'collections')" class="btn btn-outline">ğŸ“š Collections</button>
          <button onclick="window.Dashboard.serverAction('mongodb', 'stats')" class="btn btn-primary">ğŸ“Š Stats</button>
        </div>
      </div>
      <div id="mongodb-container" class="glass-card">
        <div class="empty-state">
          <span class="empty-icon">ğŸƒ</span>
          <h3>MongoDB Database</h3>
          <p>Connect to MongoDB, browse collections, and view database stats.</p>
        </div>
      </div>
      <div id="mongodb-action-result" class="glass-card result-container hidden"></div>
    </section>

    <!-- SQLite Section -->
    <section id="section-sqlite" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ’¾ SQLite Database</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('sqlite', 'tables')" class="btn btn-outline">ğŸ“‹ Tables</button>
          <button onclick="window.Dashboard.serverAction('sqlite', 'stats')" class="btn btn-primary">ğŸ“Š Stats</button>
        </div>
      </div>
      <div id="sqlite-container" class="glass-card">
        <div class="empty-state">
          <span class="empty-icon">ğŸ’¾</span>
          <h3>SQLite Database</h3>
          <p>Browse tables and view database statistics.</p>
        </div>
      </div>
      <div id="sqlite-action-result" class="glass-card result-container hidden"></div>
    </section>

    <!-- Puppeteer Section -->
    <section id="section-puppeteer" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ­ Puppeteer Browser</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('puppeteer', 'status')" class="btn btn-outline">ğŸ“Š Status</button>
          <button onclick="window.Dashboard.serverAction('puppeteer', 'launch')" class="btn btn-primary">ğŸš€ Launch</button>
        </div>
      </div>
      <div id="puppeteer-container" class="glass-card">
        <div class="empty-state">
          <span class="empty-icon">ğŸ­</span>
          <h3>Puppeteer Browser Automation</h3>
          <p>Check status or launch a headless browser instance.</p>
        </div>
      </div>
      <div id="puppeteer-action-result" class="glass-card result-container hidden"></div>
    </section>

    <!-- Thinking Section -->
    <section id="section-thinking" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ’­ Sequential Thinking</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('thinking', 'sessions')" class="btn btn-outline">ğŸ“œ Sessions</button>
          <button onclick="window.Dashboard.serverAction('thinking', 'stats')" class="btn btn-primary">ğŸ“Š Stats</button>
        </div>
      </div>
      <div id="thinking-container" class="glass-card">
        <div class="empty-state">
          <span class="empty-icon">ğŸ’­</span>
          <h3>Sequential Thinking</h3>
          <p>View reasoning sessions and thinking chain statistics.</p>
        </div>
      </div>
      <div id="thinking-action-result" class="glass-card result-container hidden"></div>
    </section>

    <!-- Storage Section -->
    <section id="section-storage" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ“ File Storage</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('storage', 'files')" class="btn btn-outline">ğŸ“‚ List Files</button>
          <button onclick="window.Dashboard.serverAction('storage', 'stats')" class="btn btn-primary">ğŸ“Š Stats</button>
        </div>
      </div>
      <div id="storage-container" class="glass-card">
        <div class="empty-state">
          <span class="empty-icon">ğŸ“</span>
          <h3>File Storage</h3>
          <p>Browse uploaded files and view storage statistics.</p>
        </div>
      </div>
      <div id="storage-action-result" class="glass-card result-container hidden"></div>
    </section>

    <!-- Fetch Section -->
    <section id="section-fetch" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸŒ HTTP Fetch</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('fetch', 'ping')" class="btn btn-primary">ğŸ“ Ping URL</button>
        </div>
      </div>
      <div id="fetch-container" class="glass-card">
        <div class="empty-state">
          <span class="empty-icon">ğŸŒ</span>
          <h3>HTTP Fetch Utility</h3>
          <p>Ping URLs to check connectivity and response times.</p>
        </div>
      </div>
      <div id="fetch-action-result" class="glass-card result-container hidden"></div>
    </section>

    <!-- Patreon Section -->
    <section id="section-patreon" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ¨ Patreon Creator Platform</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('patreon', 'identity')" class="btn btn-outline">ğŸ‘¤ Identity</button>
          <button onclick="window.Dashboard.serverAction('patreon', 'campaigns')" class="btn btn-outline">ğŸ“Š Campaigns</button>
          <button onclick="window.Dashboard.serverAction('patreon', 'members')" class="btn btn-outline">ğŸ‘¥ Members</button>
          <button onclick="window.Dashboard.serverAction('patreon', 'posts')" class="btn btn-primary">ğŸ“ Posts</button>
        </div>
      </div>
      <div id="patreon-container" class="glass-card">
        <div class="empty-state">
          <span class="empty-icon">ğŸ¨</span>
          <h3>Patreon Integration</h3>
          <p>Manage campaigns, view members, and access creator data.</p>
        </div>
      </div>
      <div id="patreon-action-result" class="glass-card result-container hidden"></div>
    </section>

    <!-- LM Studio Section -->
    <section id="section-lmstudio" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸ¤– LM Studio - Local LLM</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('lmstudio', 'models')" class="btn btn-outline">ğŸ“‹ Models</button>
          <button onclick="window.Dashboard.serverAction('lmstudio', 'status')" class="btn btn-outline">ğŸ“Š Status</button>
          <button onclick="window.Dashboard.serverAction('lmstudio', 'chat')" class="btn btn-primary">ğŸ’¬ Chat</button>
        </div>
      </div>
      <div id="lmstudio-container" class="glass-card">
        <div class="empty-state">
          <span class="empty-icon">ğŸ¤–</span>
          <h3>LM Studio Integration</h3>
          <p>Local LLM inference, model management, and chat completions.</p>
        </div>
      </div>
      <div id="lmstudio-action-result" class="glass-card result-container hidden"></div>
    </section>

    <!-- BambiSleep Chat Section -->
    <section id="section-bambisleep" class="dashboard-section">
      <div class="section-header">
        <h2 class="section-title">ğŸŒ€ BambiSleep Chat & TTS</h2>
        <div class="section-actions">
          <button onclick="window.Dashboard.serverAction('bambisleep', 'triggers')" class="btn btn-outline">âš¡ Triggers</button>
          <button onclick="window.Dashboard.serverAction('bambisleep', 'spirals')" class="btn btn-outline">ğŸŒ€ Spirals</button>
          <button onclick="window.Dashboard.serverAction('bambisleep', 'speak')" class="btn btn-primary">ğŸ¤ Speak</button>
        </div>
      </div>
      <div id="bambisleep-container" class="glass-card">
        <div class="empty-state">
          <span class="empty-icon">ğŸŒ€</span>
          <h3>BambiSleep Chat Integration</h3>
          <p>Chat triggers, hypnotic spirals, and neural voice synthesis.</p>
        </div>
      </div>
      <div id="bambisleep-action-result" class="glass-card result-container hidden"></div>
    </section>
  </main>

  <!-- Modal Container -->
  <div id="modal-container"></div>

  <!-- Footer -->
  <footer class="footer">
    <span class="footer-brand">BambiSleepâ„¢ Church MCP Control Tower</span> â€¢ 
    <span id="connection-status" class="connection-connecting">Connecting...</span>
    <span class="footer-links">
      <a href="/privacy-policy.html">Privacy</a> â€¢ 
      <a href="/terms-of-service.html">Terms</a>
    </span>
    <span class="keyboard-hint">Press <kbd>?</kbd> for shortcuts</span>
  </footer>

  <!-- Load modular application -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
